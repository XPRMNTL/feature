<h1>EditAppsView</h1>

<table class="table table-hover table-striped table-condensed">
  <caption>
    <span class="pull-right">
      <label class="pull-right">
        <span title="{{ fetched.format }}" data-ng-hide="loading">List cached {{ fetched.fromNow }}</span>
        <a class="btn btn-primary" data-ng-click="refreshList()" data-ng-disabled="loading">
          <span class="glyphicon glyphicon-refresh"></span> Refresh List
        </a>
      </label>
    </span>
  </caption>
  <tr>
    <th colspan="2">App Name
      <label class="pull-right">
        <span class="input-group input-group-sm">
          <span class="input-group-addon">
            Filter
          </span>
          <input type="text" class="form-control" data-ng-model="search.name">
          <span class="input-group-btn">
            <button
              class="btn btn-danger"
              data-ng-disabled="! search.name.length"
              data-ng-click="clearSearch()"
            >
              <span class="glyphicon glyphicon-remove"></span>
            </button>
          </span>
        </span>
      </label>
    </th>
  </tr>
  <tbody
    data-ng-repeat-start="(org, appList) in orgList"
    data-ng-class="{
      true : 'hide'
    }[loading]"
  >
    <tr>
      <th class="info" colspan="2" data-ng-click="toggleView($index)">{{ org }} ({{ (appList | filter:search).length }} repos)
        <span
          class="glyphicon glyphicon-chevron-left pull-right"
          data-ng-class="{
            true : 'hide'
          }[!! open[$index]]"
        ></span>
        <span
          class="glyphicon glyphicon-chevron-down pull-right"
          data-ng-class="{
            false : 'hide'
          }[!! open[$index]]"
        ></span>
      </th>
    </tr>
  </tbody>
  <tbody
    data-ng-repeat-end
    data-ng-class="{
      false : 'hide'
    }[(!!open[$index]) && (! loading)]"
  >
    <tr data-app-item data-ng-repeat="app in appList | filter:search"></tr>
  </tbody>
</table>
<loading status="loading"></loading>
